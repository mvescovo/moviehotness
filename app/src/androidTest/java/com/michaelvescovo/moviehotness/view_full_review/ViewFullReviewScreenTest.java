package com.michaelvescovo.moviehotness.view_full_review;

import android.content.Intent;
import android.support.test.rule.ActivityTestRule;
import android.support.test.runner.AndroidJUnit4;
import android.test.suitebuilder.annotation.SmallTest;

import com.michaelvescovo.moviehotness.R;

import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.assertion.ViewAssertions.matches;
import static android.support.test.espresso.matcher.ViewMatchers.isDisplayed;
import static android.support.test.espresso.matcher.ViewMatchers.withId;
import static android.support.test.espresso.matcher.ViewMatchers.withText;

/**
 * Created by Michael Vescovo on 14/01/16.
 *
 */
@RunWith(AndroidJUnit4.class)
@SmallTest
public class ViewFullReviewScreenTest {

    public static final String AUTHOR = "Frank Ochieng";
    public static final String CONTENT = "The Martian’ is definitely in the creative wheelhouse of filmmaker Ridley Scott whose Science Fiction sensibilities are grounded in colorful futuristic fantasies that tiptoe in grand whimsy.  The veteran auteur responsible for such pop cultural high-minded spectacles in ‘Alien’, ‘Blade Runner’ and even the mixed bag reception of ‘Prometheus’ certainly brings a sophisticated and thought-provoking vibe to the probing aura of ‘The Martian’. As with other Scott-helmed productions, ‘The Martian’ settles nicely in its majestic scope that taps into visual wonderment, humanistic curiosities, technical impishness and the surreal spryness of the SF experience.\\r\\n\\r\\nThe exploratory nature of ‘The Martian’ is its own noteworthy mission. Scott arms his frothy planetary odyssey with a sense of thematic inquisitiveness and intelligence while meshing human consciousness and scientific forethought. Clearly, ‘The Martian’ is astutely meditative and one can thankfully block in their memory banks some of Scott’s mediocre misses (anyone care to recall the monumental mishaps in the form of the flimsy ‘The Counselor’ or the unintentional laughfest that was ‘Exodus: Gods And Kings’?). Rightfully so, ‘The Martian’ shares its crafty crater of similarities with other space-place spectacles that resonated with the imagination and innovation such as the Academy Award-winning ‘Gravity’ and the under-rated ‘Interstellar’. \\r\\n\\r\\nQuite frankly, ‘The Martian’ is elegantly arresting in its sheer skin for both the character studies and the major plight involved (particularly anchored on the shoulders of star Matt Damon as the contemplative lead) as well as the trademark Scott-induced flourishes that incorporate crisp and cunning visual special effects and a sweeping musical score that invites a transfixing hold on one’s indelible spirit.\\r\\n\\r\\n‘The Martian’ is the film adaptation of Andy Weir’s best-selling tome. Scott’s disciplined direction and screenwriter Drew Goddard’s ambitious vision of Weir’s compelling written material seemingly gels in convincing, cerebral fashion. The premise is not wildly original as it revisits the familiar foundation of a lost soul in survival mode trying to take on the treacherous surroundings with philosophical conviction. Nevertheless, this does not make ‘The Martian’ any less formidable in its soul-searching perspective. Scott’s narrative on individualism and isolation with a tremendous technological tilt truly registers with boisterous bounce. Amazingly, Scott has assembled a capable and committed cast that are dedicated to making ‘The Martian’ look resourcefully skillful in its masterful mischievousness. Sure, The Martian’s lengthy running time is staggering but it is compelling enough to invest in its meandering, adventurous narrative.\\r\\n\\r\\nThe ultimate nightmare (or perilous predicament…take your choice) has been realised for one stranded space traveler in Mark Watney (Matt Damon). You see…poor astronaut Watney had the misfortune of losing contact with his commander in Melissa Lewis (Jessica Chastain) and the rest of his crew when undergoing a scientific expedition to examine the terrain on Mars. Courtesy of an unexpected freakish storm Watney is separated from his comrades and believed to be dead as a result of the hazardous weather conditions on Mars. Lewis and her associates have no choice but to head back to Earth as searching for Watney may prove to be futile and endanger their lives as well.\\r\\n\\r\\nThus, Mark Watney is basically his own forced-upon version of ‘Robinson Crusoe On Mars’. There is no option for Watney but to allow his major survival instincts to kick in while striving for his jeopardised livelihood on the unpredictable and treacherous Red Planet’s jagged landscape. Despite being stuck in hostile territory, Watney must use his background skills as a trained botanist to cultivate the scarce food he must rely on for his unconventional nutrition. The only ‘companion’ that Watney has to relate to rests in the recorded device that captures his harried thoughts through video diaries (at least this is more practical than what Tom Hanks’s ‘Castaway’ character had in his possession with inanimate object best buddy, Wilson the volleyball).\\r\\n\\r\\nIn the meanwhile, the devastating news about Mark Watney’s possible death far beyond the reaches of home hits his colleagues understandably hard as tributes start to pour in remembrance of the seemingly dearly departed space pioneer. Soon, there is some measure of hope when NASA officials that include head honchos Teddy Sanders (Jeff Daniels from TV’s ‘The Newsroom’), Vincent Kapoor (the Oscar-nominated Chiwetel Ejiofor from ’12 Years A Slave’) and Mitch Henderson (Sean Bean) find evidence that Watney may be alive and ready to be rescued. Naturally, a sense of urgency is warranted to retrieve the weary astronaut without causing too many public relations waves. This puts press aide Annie Montrose (Kristen Wiig) into damage control mode in particular.\\r\\n\\r\\nOkay...so it is not as scenic as Yellowstone National Park but the rocky region in THE MARTIAN still has some unassuming charm, right?\\r\\nOkay…so it is not as scenic as Yellowstone National Park but the rocky region in THE MARTIAN still has some unassuming charm, right?\\r\\nImportantly, ‘The Martian’ is clever and carefully conceived because it does not have to rely on the excess baggage to convey its entertainment value in a series of hyperactive and hedonistic happenings. Ridley Scott is soundly methodical in presenting a low-key terrifying tale of loneliness and resiliency and what it takes to handle the pressure of adversity when there is no glimmer of humanity around to reinforce or remind one of such psychological obstacles. The intriguing factor here is the science-friendly serving of intelligence and insight that builds up the audience’s appreciation for the underlying suspense. Interestingly, the conflict approached in ‘The Martian’ is not so much the back-and-forth high-scale struggles of man versus outlandish creature or an over-the-top diabolical deviant out to destroy the world in cartoonish fashion. No, the genuine combative and confrontational war of will is contained in one vulnerable man’s ability to face the unknown grounded in both doubt and determination. Hence, Scott has made a palpable thinking man’s Science Fiction exposition rooted in articulated forethought.\\r\\n\\r\\nDamon more than holds his own as the disillusioned botanist/astronaut out on an ominous limb as his doomed odyssey of uncertainty is something that the common viewer can embrace and relate to without question. The perceived opulence in ‘The Martian’ is not contained in the film’s production values per se (Scott has made previous movies with more visual vitality and purpose) but subtly showcased in the concepts of  knowledgeable tidbits concerning food rations, mathematical equations, crucial time tables, planetary probes, NASA-themed procedural techniques and aerodynamics considerations.\\r\\n\\r\\nHopefully, ‘The Martian’ is not dismissed as a foreign alien in the minds of ardent movie-going SF enthusiasts looking for a realistic and soulful space-age adventure with a refreshing backbone of scientific curiosity and candidness.\\r\\n\\r\\nThe Martian (2015)\\r\\n\\r\\n20th Century Fox\\r\\n\\r\\n2 hrs. 35 mins.\\r\\n\\r\\nStarring: Matt Damon, Jessica Chastain, Jeff Daniels, Kristen Wiig, Michael Pena, Sean Bean, Chiwetel Ejiofor, Kate Mara, Sebastian Stan, Donald Glover and Benedict Wong\\r\\n\\r\\nDirected by: Ridley Scott\\r\\n\\r\\nMPAA Rating: PG-13\\r\\n\\r\\nGenre: Science Fiction/Space Adventure/Science and Fantasy\\r\\n\\r\\nCritic’s rating: *** 1/2 stars (out of 4 stars).";

    @Rule
    public ActivityTestRule<ViewFullReviewActivity> mViewFullReviewActivityTestRule = new ActivityTestRule<>(ViewFullReviewActivity.class, true, false);

    @Before
    public void intentWithStubbedAuthorAndContent() {
        // Lazily start the Activity from the ActivityTestRule to inject the start Intent
        Intent intent = new Intent();
        intent.putExtra(ViewFullReviewActivity.AUTHOR, AUTHOR);
        intent.putExtra(ViewFullReviewActivity.CONTENT, CONTENT);
        mViewFullReviewActivityTestRule.launchActivity(intent);
    }

    @Test
    public void fullReview_DisplayedInUi() throws Exception {
        onView(withId(R.id.full_review_author_label)).check(matches(isDisplayed()));
        onView(withId(R.id.full_review_author_label)).check(matches(withText(R.string.review_author_label)));
        onView(withId(R.id.full_review_author)).check(matches(isDisplayed()));
        onView(withId(R.id.full_review_author)).check(matches(withText(AUTHOR)));
        onView(withId(R.id.full_review_content)).check(matches(isDisplayed()));
        onView(withId(R.id.full_review_content)).check(matches(withText(CONTENT)));
    }
}
